<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>My first three.js app</title>
		<style>
			body { margin: 0; }
		</style>
	</head>
	<body>
		<script type = "module">
            import Application from '../core/app.js';
            import solarSystemObjects from '../core/solar_system_objects.js';
            class EventBus {
                constructor() {
                    this.publishedEvents = {};
                }

                publish(eventName, ...args) {
                    const callbacks = this.publishedEvents[eventName];

                    if (!callbacks) {
                        console.warn(eventName + " not found!");
                        return;
                    }

                    for (let callback of callbacks) {
                        callback(...args);
                    }
                }

                subscribe(eventName, callback) {
                    if (typeof callback !== "function") {
                        console.warn("callback must be a function!");
                        return;
                    }

                    if (!this.publishedEvents[eventName]) {
                        this.publishedEvents[eventName] = [];
                    }

                    this.publishedEvents[eventName].push(callback);
                }
            }
            const eventBus = new EventBus();
            const app = new Application(solarSystemObjects, eventBus, 1);
            app.animate();

        </script>
	</body>
</html>